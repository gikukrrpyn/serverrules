(()=>{const e=document.getElementById("search-input"),t=document.getElementById("search-results");function n(e){let t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}const o=Array.from(document.querySelectorAll(".menu-item")).map(((e,t)=>{const o=e.querySelector("b > span"),r=o?o.textContent.trim():"",s=e.getAttribute("onclick")||"";let l="";try{const e=s.match(/openModalFromId\(([\s\S]*?)\)$/);if(e){const t=e[1],o=/`([\s\S]*?)`/g;let r;for(;null!==(r=o.exec(t));)l+=" "+n(r[1]);if(""===l.trim()){const e=/(["'`])((?:\\\1|[\s\S])*?)\1/g;let o;for(;null!==(o=e.exec(t));){let e=o[2];e=e.replace(/\\n|\\t|\\r/g," "),l+=" "+n(e)}}}}catch(e){console.warn("Помилка при розборі openModalFromId",e)}return{menuItem:e,index:t+1,title:r,content:l.trim()}}));if("function"==typeof window.openModal){const t=window.openModal;window.openModal=function(...n){t(...n),setTimeout((()=>{const t=document.querySelector(".modal");if(!t)return;const n=e.value.trim();if(!n)return;!function(e,t){const n=new RegExp(`(${t})`,"i"),o=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null);for(;o.nextNode();){const e=o.currentNode;if(e.nodeValue&&n.test(e.nodeValue)){document.createElement("span").className="highlighted";const o=e.nodeValue.split(n),r=document.createDocumentFragment();for(let e=0;e<o.length;e++)if(o[e].toLowerCase()===t.toLowerCase()){const t=document.createElement("span");t.className="highlighted",t.textContent=o[e],r.appendChild(t)}else r.appendChild(document.createTextNode(o[e]));return void e.parentNode.replaceChild(r,e)}}}(t,n);const o=t.querySelector(".highlighted");o&&(o.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout((()=>{t.querySelectorAll(".highlighted").forEach((e=>{const t=e.parentNode;t.replaceChild(document.createTextNode(e.textContent),e),t.normalize()}))}),2e3))}),100)}}e.addEventListener("input",(()=>{const n=e.value.trim().toLowerCase();if(t.innerHTML="",!n)return;const r=o.filter((({title:e="",content:t="",index:o})=>e.toLowerCase().includes(n)||t.toLowerCase().includes(n)||o.toString().includes(n)));0!==r.length?r.forEach((({menuItem:e,title:n,index:o})=>{const r=document.createElement("div");r.textContent=`${o}. ${n}`,r.title=`Перейти до пункту: ${n}`,r.addEventListener("click",(()=>{e.click(),setTimeout((()=>{e.scrollIntoView({behavior:"smooth",block:"center"})}),100)})),t.appendChild(r)})):t.innerHTML="<div>Нічого не знайдено.</div>"}))})();const input=document.getElementById("search-input"),results=document.getElementById("search-results");function openModal(e,t,n){document.getElementById("ruleText").innerHTML=e,document.getElementById("penaltyText").innerHTML=t||"";const o=document.getElementById("ruleModal");if(o.setAttribute("data-id",n||""),o.style.display="block",!n){history.replaceState(null,null,window.location.pathname+window.location.search);const e=document.getElementById("modalShareLink");e&&(e.innerHTML="",e.remove())}}function openModalFromId(e,t,n){const o=document.getElementById("ruleModal"),r=document.getElementById("modalBackdrop");if(void 0===t&&void 0===n){openModal(e,"","")}else history.replaceState(null,null,`#${e}`),openModal(t,n,e),addShareLinkButton(e);o.style.display="block",r.style.display="block",document.body.style.overflow="hidden"}function closeModal(){history.pushState("",document.title,window.location.pathname+window.location.search);const e=document.getElementById("ruleModal"),t=document.getElementById("modalBackdrop");e.style.display="none",t.style.display="none",document.body.style.overflow="";const n=document.getElementById("modalShareLink");n&&(n.innerHTML="",n.remove())}function isElementInView(e){let t=e.getBoundingClientRect();return t.top>=0&&t.top<=window.innerHeight}function isElementInView(e){let t=e.getBoundingClientRect();return t.top>=0&&t.top<=window.innerHeight}function addShareLinkButton(e){let t=document.getElementById("modalShareLink");if(!t){t=document.createElement("div"),t.id="modalShareLink",t.style.position="absolute",t.style.top="10px",t.style.left="10px",t.style.zIndex="9999";document.getElementById("ruleModal").prepend(t)}t.innerHTML="";const n=document.createElement("button");n.classList.add("copy-link-btn"),n.onclick=async()=>{const t=`${window.location.origin}${window.location.pathname}#${e}`;try{await navigator.clipboard.writeText(t),n.classList.add("copied"),setTimeout((()=>{n.classList.remove("copied")}),2e3)}catch(e){const o=document.createElement("input");o.value=t,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),n.classList.add("copied"),setTimeout((()=>{n.classList.remove("copied")}),2e3)}},t.appendChild(n)}function getTodayKey(){const e=new Date;return`views/${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function incrementGlobalViewCounter(){const e=firebase.database().ref(getTodayKey());console.log("Інкрементуємо лічильник за ключем:",getTodayKey()),e.transaction((e=>(console.log("Поточне значення:",e),(e||0)+1)),((e,t,n)=>{e?console.error("Transaction failed:",e):t?(console.log("Transaction зафіксовано, нове значення:",n.val()),localStorage.setItem("lastViewTime",Date.now())):console.log("Transaction не зафіксовано")}))}function updateGlobalViewDisplay(){const e=firebase.database().ref(getTodayKey()),t=document.getElementById("viewCounter");t?e.on("value",(e=>{const n=e.val()||0;console.log("Поточне значення з Firebase:",n),t.innerHTML=`<strong>${n}</strong>`})):console.warn("Елемент #viewCounter не знайдено")}function tryIncrementWithLimit(){const e=Date.now(),t=localStorage.getItem("lastViewTime");!t||e-parseInt(t,10)>3e5?incrementGlobalViewCounter():console.log("Перегляд вже зарахований, чекати 5 хвилин")}function scrollToElement(e,t=null){let n;if(null===t)n=document.getElementById(e);else{n=document.getElementsByClassName(e)[t]}if(n){const e=n.getBoundingClientRect().top+window.scrollY,t=n.offsetHeight,o=e-window.innerHeight/2+t/2;window.scrollTo({top:o,behavior:"smooth"})}}input.addEventListener("input",(()=>{input.value.trim().length>0?results.style.display="block":results.style.display="none"})),document.getElementById("modalBackdrop").addEventListener("click",closeModal),window.addEventListener("scroll",(function(){const e=document.querySelector(".top-bar"),t=document.querySelector(".header");e&&t&&(window.scrollY>0?(e.classList.add("scrolled"),t.classList.add("scrolled")):(e.classList.remove("scrolled"),t.classList.remove("scrolled")))})),window.addEventListener("scroll",(function(){document.querySelectorAll(".menu-item").forEach((e=>{isElementInView(e)&&e.classList.add("visible")}))})),window.addEventListener("load",(function(){document.querySelectorAll(".menu-item").forEach(((e,t)=>{setTimeout((()=>{e.classList.add("visible")}),300*t)}))})),window.addEventListener("scroll",(function(){document.querySelectorAll(".menu-item").forEach((e=>{isElementInView(e)&&e.classList.add("visible")}))})),window.addEventListener("DOMContentLoaded",(()=>{if(performance.navigation.type===performance.navigation.TYPE_RELOAD)return void history.replaceState(null,null,window.location.pathname);const e=window.location.hash.replace("#","");if(!e)return;const t=document.querySelector(`.menu-item[data-id="${e}"]`);t&&(t.click(),setTimeout((()=>{t.scrollIntoView({behavior:"smooth",block:"center"})}),100))})),window.addEventListener("DOMContentLoaded",(()=>{updateGlobalViewDisplay(),tryIncrementWithLimit()})),window.addEventListener("scroll",(()=>{window.scrollY>50?document.body.classList.add("scrolled"):document.body.classList.remove("scrolled")})),document.addEventListener("DOMContentLoaded",(function(){!function(){const e=document.querySelectorAll(".org-dropdown");e.forEach((e=>{const t=e.querySelector(".org-dropbtn"),n=e.querySelectorAll(".org-dropdown-item");if(!t)return;const o=e.closest(".org-section"),r=o?o.querySelectorAll(".org-tab-content"):document.querySelectorAll(".org-tab-content");let s=o?o.querySelector(".org-tab-content.active"):document.querySelector(".org-tab-content.active");if(!s&&o&&(s=o.querySelector(".org-tab-content"),s&&s.classList.add("active")),s){const e=Array.from(s.classList).find((e=>"org-tab-content"!==e&&"active"!==e));if(e){const o=Array.from(n).find((t=>t.getAttribute("data-section")===e));if(o)t.textContent=o.textContent;else{const e=n[0];e&&(t.textContent=e.textContent)}}}else{const e=n[0];e&&(t.textContent=e.textContent)}t.addEventListener("click",(function(){e.classList.toggle("active")})),n.forEach((n=>{n.addEventListener("click",(function(){const n=this.getAttribute("data-section");t.textContent=this.textContent,e.classList.remove("active"),o?o.querySelectorAll(".org-tab-content").forEach((e=>{e.classList.remove("active")})):r.forEach((e=>{e.classList.remove("active")}));const s=o?o.querySelector(`.org-tab-content.${n}`):document.querySelector(`.org-tab-content.${n}`);s&&s.classList.add("active")}))}))})),document.addEventListener("click",(function(t){e.forEach((e=>{e.contains(t.target)||e.classList.remove("active")}))}))}(),document.querySelectorAll(".rank-title").forEach((e=>{e.addEventListener("click",(function(){const e=this.nextElementSibling,t=e.classList.contains("active"),n=this.closest(".org-section");n?n.querySelectorAll(".rank-content").forEach((e=>{e.classList.remove("active")})):document.querySelectorAll(".rank-content").forEach((e=>{e.classList.remove("active")})),t||e.classList.add("active")})),e.addEventListener("keydown",(function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.click())}))}))})),document.addEventListener("DOMContentLoaded",(()=>{const e=Array.from(document.querySelectorAll(".review-card")),t=document.querySelector(".arrow-next"),n=document.querySelector(".arrow-prev");let o=0,r=null,s=!1,l=null;function a(t){e.forEach((e=>e.classList.remove("active")));const n=e[t];n.classList.add("active");!function(e){const t=parseInt(e.getAttribute("data-rating"))||0,n=e.querySelector(".stars");n.innerHTML="";for(let e=1;e<=5;e++){const o=document.createElement("span");o.classList.add("star"),o.innerHTML="★",e<=t&&o.classList.add("filled"),n.appendChild(o)}}(n.querySelector(".review-content"))}function c(){s=!0,l&&clearTimeout(l),l=setTimeout((()=>{s=!1}),1e4)}t&&t.addEventListener("click",(()=>{o=(o+1)%e.length,a(o),c()})),n&&n.addEventListener("click",(()=>{o=(o-1+e.length)%e.length,a(o),c()})),r=setInterval((function(){if(!s){let t;do{t=Math.floor(Math.random()*e.length)}while(t===o&&e.length>1);o=t,a(o)}}),6e3),a(o)})),document.querySelectorAll(".faq-question").forEach((e=>{e.addEventListener("click",(()=>{const t=e.closest(".faq-item"),n=t.querySelector(".faq-answer"),o=e.querySelector(".faq-icon"),r=t.classList.contains("active");document.querySelectorAll(".faq-item").forEach((e=>{e!==t&&(e.classList.remove("active"),e.querySelector(".faq-icon").textContent="+",e.querySelector(".faq-answer").style.maxHeight=null,e.querySelector(".faq-answer").style.paddingBottom="0")})),r?(t.classList.remove("active"),o.textContent="+",n.style.maxHeight=null,n.style.paddingBottom="0"):(t.classList.add("active"),o.textContent="−",n.style.maxHeight=n.scrollHeight+"px",n.style.paddingBottom="20px")}))}));const fortunes=["Твої інвестиції нарешті принесуть плоди: ти знайдеш в зимовій куртці 200 гривень, про які забув/-ла ще у 2024-му.","На тебе чекає бурхливий роман… з власним ліжком. Це будуть найстабільніші та найніжніші стосунки у твоєму житті.","Твоя друга половинка нарешті знайдеться. Це буде та сама пара шкарпеток, яка зникла після прання три місяці тому.","Зірки обіцяють поповнення в родині: швидше за все, це буде новий кіт або чергова підписка на стрімінговий сервіс.","У 2026 році здоровий спосіб життя стане простішим. Якщо не можеш бігати зранку, хоча б швидко ходи за кавою.","Дієта року: можна їсти все, що хочеться, але тільки тоді, коли ніхто не бачить. Калорії в темряві не рахуються!","Ти досягнеш такого рівня дзену, що фраза термінова задача на вчора викликатиме у тебе лише легку посмішку та бажання піти на перерву.","Твій телефон триматиме заряд рівно до того моменту, поки тобі не знадобиться зробити найважливіше фото року.","Ти відкриєш в собі джерело радості, незалежне від пори року.","Палай в цьому році, як зірочка на ялинці!","Не важливо що за столом, а хто.","Ти станеш магнітом для хороших людей і подій.","Шлях до мрії буде сяяти, наче доріжка з гірлянд.","Мандариновий аромат принесе відчуття свіжості і початку.","Ти отримаєш ключ до дверей, про які навіть не здогадувався.","Сніжинки випадуть саме так, щоб нагадати про унікальність твого шляху.","Зима очистить життя для нового, наче свіжий сніг.","Ти зрозумієш, що найцінніший подарунок вже знаходиться всередині тебе.","Ти навчишся танцювати під дощ, якщо сніг не випаде.","Миколай принесе тобі те, що ти хочеш, але тільки якщо це є в Ашані.","Один з твоїх олів'є нарешті вийде ідеальним... але потім його з'їсть хтось інший.","Ти отримаєш різдвяну листівку від людини, ім'я якої не згадаєш ще місяць.","Ти знайдеш ідеальний подарунок... за день до свят, і він буде зі знижкою 70%.","У тебе закінчаться батарейки для гірлянди рівно о 23:59 31 грудня.","Ти проговориш всю ніч, а наступного ранку згадаєш тільки анекдот про снігуроньку.","Твоя дитяча фотографія з Миколаєм буде демонструватися всім гостям без твоєї згоди.","Ти отримаєш смс-привітання від свого банку.","Твоя новорічна забаганка буде здійснена... через 11 місяців, коли ти про неї забудеш.","Ти з'їси стільки мандаринів, що твоя шкіра тимчасово набуде їх відтінку.","Твоя перша думка 1 січня буде: «І навіщо я це робив(ла)?».","Твоя спроба заспівати пісню «Last Christmas' англійською буде дуже творчою».","Твій тост триватиме довше, ніж підготовка до свят.","Завдання, що лякало, розтане, наче сніг на долоні.","Новий рік принесе відповіді, які ти носив у собі.","Смак імбирного печива нагадає про солодкість досягнень.","Перша зірка на небі подарує впевненість у завтрашньому дні.","Новий рік почнеться з кави, а продовжиться великими ідеями.","У 2026 році твоя впертість почне працювати на тебе.","Гроші не впадуть з неба, але шлях до них стане коротшим.","Різдвяний настрій допоможе побачити хороше в простому.","Ти дозволиш собі бути неідеальним — і виграєш.","Твій новорічний настрій підскочить вище, ніж ціни на подарунки.","У цьому році ти знайдеш час на спорт… або хоча б на його перегляд у TikTok.","Різдво принесе чудо: хтось помиє посуд замість тебе.","Новий рік дасть тобі шанс змінитися — або залишитися собою, це теж варіант.","Цього року ти навчишся казати «ні»... але не на другий шматок торта.","У цьому році твоя креативність буде сильнішою за будильник.","Різдво принесе мир і спокій… на 5 хвилин, поки не знову дзвонить хтось із родини.","Твоя удача зросте, як кількість залишків їжі після святкового столу.","Ти знайдеш справжню любов. До конкретного сорту мандаринів."];function getMidnightTimestamp(){const e=new Date;return e.setHours(0,0,0,0),e.getTime()}function canOpenCookie(){const e=localStorage.getItem("fortuneCookieLastOpened");if(!e)return!0;const t=new Date(parseInt(e)),n=new Date;return n.getDate()!==t.getDate()||n.getMonth()!==t.getMonth()||n.getFullYear()!==t.getFullYear()}function getTimeLeft(){const e=new Date,t=new Date;return t.setHours(24,0,0,0),t.getTime()-e.getTime()}function updateLastOpened(){localStorage.setItem("fortuneCookieLastOpened",Date.now().toString())}function formatTime(e){const t=Math.floor(e/1e3),n=Math.floor(t/3600),o=Math.floor(t%3600/60),r=t%60;return`${n.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}let countdownInterval;function openCookie(){const e=document.getElementById("fortuneBackdrop"),t=document.getElementById("fortunePaper"),n=document.getElementById("fortuneText");if(countdownInterval&&clearInterval(countdownInterval),canOpenCookie())n.textContent=fortunes[Math.floor(Math.random()*fortunes.length)],updateLastOpened();else{let e=getTimeLeft();n.innerHTML=`Печенько можна відкривати лише раз на добу.<br><br>Зачекайте: ${formatTime(e)}`,countdownInterval=setInterval((()=>{e-=1e3,e<=0?(clearInterval(countdownInterval),n.textContent="Тепер ви можете відкрити печенько знову!"):n.innerHTML=`Печенько можна відкривати лише раз на добу.<br><br>Зачекайте: ${formatTime(e)}`}),1e3)}e.style.display="flex",t.style.animation="unroll 0.6s ease forwards",e.onclick=closeCookie,t.onclick=closeCookie,n.onclick=function(e){e.stopPropagation()}}function closeCookie(){const e=document.getElementById("fortuneBackdrop"),t=document.getElementById("fortunePaper");t.style.animation="none",e.style.display="none",e.onclick=null,t.onclick=null,countdownInterval&&clearInterval(countdownInterval)}const categories=["Адміністрація","Суд","ДБР","СБС","НАБС","ДАРШ","Поліція","Мерія","Інше"],categoriesWrapper=document.getElementById("categoriesWrapper"),rolesContainer=document.getElementById("rolesContainer"),noticeContainer=document.getElementById("noticeContainer"),searchInput=document.getElementById("searchInput"),searchResult=document.getElementById("searchResult"),mobileCategoryBtn=document.getElementById("mobileCategoryBtn"),mobileCategoriesDropdown=document.getElementById("mobileCategoriesDropdown"),mobileCategoryText=mobileCategoryBtn.querySelector("span");let activeCategory="Адміністрація",activeBtn=null,mobileActiveItem=null;function createCategoryList(){categories.forEach((e=>{const t=document.createElement("li");t.className="category",t.innerHTML=`<span class="dot"></span>${e}`,t.addEventListener("click",(()=>setActiveCategory(e,t))),categoriesWrapper.appendChild(t),"Адміністрація"===e&&(t.classList.add("active"),activeBtn=t)})),categories.forEach((e=>{const t=document.createElement("div");t.className="mobile-category-item",t.textContent=e,t.addEventListener("click",(()=>{setActiveCategory(e,null),mobileCategoryText.textContent=e,mobileCategoriesDropdown.classList.remove("show"),mobileCategoryBtn.classList.remove("active"),mobileActiveItem&&mobileActiveItem.classList.remove("active"),t.classList.add("active"),mobileActiveItem=t})),mobileCategoriesDropdown.appendChild(t),"Адміністрація"===e&&(t.classList.add("active"),mobileActiveItem=t,mobileCategoryText.textContent="Адміністрація")}))}function setActiveCategory(e,t){if(activeCategory===e)return;activeBtn&&activeBtn.classList.remove("active"),mobileActiveItem&&mobileActiveItem.classList.remove("active"),activeCategory=e,t&&(t.classList.add("active"),activeBtn=t),mobileCategoryText.textContent=e;mobileCategoriesDropdown.querySelectorAll(".mobile-category-item").forEach((t=>{t.textContent===e&&(t.classList.add("active"),mobileActiveItem=t)})),showRoles(e),rolesContainer.style.opacity=0,rolesContainer.style.transform="translateY(-10px)",setTimeout((()=>{rolesContainer.style.transition="all 0.35s ease",rolesContainer.style.opacity=1,rolesContainer.style.transform="translateY(0)"}),10)}function showRoles(e){rolesContainer.innerHTML="",noticeContainer.innerHTML="";const t=document.createElement("div");t.className="roles";let n=!1;if("undefined"!=typeof players)for(const[o,r]of Object.entries(players))r.forEach((r=>{if(r.category===e){n=!0;const e=r.telegram?.startsWith("t.me/")?`https://${r.telegram}`:`tg://openmessage?user_id=${r.telegram}`,s=document.createElement("div");s.className="role",s.innerHTML=`\n            <div class="role-inner">\n              <img class="avatar" src="${r.avatar||"https://via.placeholder.com/150"}" alt="${o}" />\n              <div class="role-info">\n                <strong>${r.role}</strong><br>\n                Username: <b>${o}</b><br>\n                Telegram: <a href="${e}" target="_blank" rel="noopener noreferrer">${r.telegram}</a>\n                ${r.status?`<div class="role-status">${r.status}</div>`:""}\n              </div>\n            </div>\n          `,t.appendChild(s)}}));n||(t.innerHTML="<p><b>У цій категорії немає ролей.</b></p>"),rolesContainer.appendChild(t)}mobileCategoryBtn.addEventListener("click",(e=>{e.stopPropagation(),mobileCategoriesDropdown.classList.toggle("show"),mobileCategoryBtn.classList.toggle("active")})),document.addEventListener("click",(e=>{mobileCategoryBtn.contains(e.target)||mobileCategoriesDropdown.contains(e.target)||(mobileCategoriesDropdown.classList.remove("show"),mobileCategoryBtn.classList.remove("active"))})),createCategoryList(),setTimeout((()=>{showRoles("Адміністрація")}),100);const firebaseConfig={apiKey:"AIzaSyAy7OL4vRX_jOCjsY4t7kswy5KLI7_xTDc",authDomain:"globalviewcounter.firebaseapp.com",databaseURL:"https://globalviewcounter-default-rtdb.europe-west1.firebasedatabase.app",projectId:"globalviewcounter",storageBucket:"globalviewcounter.firebasestorage.app",messagingSenderId:"298007727934",appId:"1:298007727934:web:610bab7e3ed1a757c5666f",measurementId:"G-ZRNEWXQDZT"};firebase.initializeApp(firebaseConfig);const database=firebase.database();function activateTab(e){const t=document.querySelector(`.tab-btn[data-tab="${e}"]`),n=document.getElementById(e);t&&n&&(document.querySelectorAll(".tab-btn").forEach((e=>e.classList.remove("active"))),t.classList.add("active"),document.querySelectorAll(".tab-panel").forEach((e=>e.classList.remove("active"))),n.classList.add("active"))}function scrollToFaq(e,t=200){const n=document.getElementById(e);if(!n)return;const o=n.querySelector(".faq-title");o&&setTimeout((()=>{const e=o.getBoundingClientRect().top+window.pageYOffset-t;window.scrollTo({top:e,behavior:"smooth"})}),10)}function showModal(){document.getElementById("pv-modal").classList.add("show")}function pvCloseModal(){document.getElementById("pv-modal").classList.remove("show")}document.querySelectorAll(".tab-btn").forEach((e=>{e.addEventListener("click",(()=>{const t=e.getAttribute("data-tab");history.pushState(null,"","#"+t),activateTab(t)}))})),window.addEventListener("load",(()=>{const e=window.location.hash.substring(1);if(e)activateTab(e),scrollToFaq(e,200);else{const e=document.querySelector(".tab-btn");e&&activateTab(e.getAttribute("data-tab"))}})),window.addEventListener("hashchange",(()=>{const e=window.location.hash.substring(1);e&&(activateTab(e),scrollToFaq(e,200))})),document.querySelectorAll(".photo img").forEach((e=>{e.addEventListener("click",(()=>{document.querySelector("#photo-modal").style.display="flex",document.querySelector("#photo-modal img").src=e.src,document.body.style.overflow="hidden"}))})),document.querySelector(".photo-close").addEventListener("click",(()=>{document.querySelector("#photo-modal").style.display="none",document.body.style.overflow=""})),document.querySelector("#photo-modal").addEventListener("click",(e=>{"photo-modal"===e.target.id&&(e.target.style.display="none",document.body.style.overflow="")})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".photo-of-the-week"),t=document.querySelector(".tab-container"),n=e.parentNode,o=e.nextElementSibling;function r(){window.innerWidth<=768?t&&t.nextElementSibling!==e&&t.insertAdjacentElement("afterend",e):o?n.insertBefore(e,o):n.appendChild(e)}r(),window.addEventListener("resize",r)})),window.handleSelectChange=function(e){const t=e.value,n=document.getElementById("username");t?n.disabled=!1:(n.disabled=!0,n.value="")},window.checkLicense=function(){const e=document.getElementById("licenseType").value,t=document.getElementById("username").value.trim(),n=(document.getElementById("pv-modal"),document.getElementById("pv-modal-content"));if(!e&&!t)return n.innerHTML='<p class="error">Виберіть категорію для перевірки та введіть username.</p>',void showModal();if(!e)return n.innerHTML='<p class="error">Виберіть категорію для перевірки.</p>',void showModal();if(!t)return n.innerHTML='<p class="error">Введіть username власника.</p>',void showModal();const o=t.trim().toLowerCase();let r=null;if(licenses[e])if(Array.isArray(licenses[e]))r=licenses[e].filter((e=>e.username.toLowerCase()===o));else if("object"==typeof licenses[e]){const t=Object.keys(licenses[e]).find((e=>e.toLowerCase()===o));r=t?licenses[e][t]:null}if("business"!==e){if("police"===e)if(r){let e=`<h2>Інформація про Поліцейського ${t}</h2>`;const o=(r.role||"").toLowerCase();if(o.includes("sbs"))e+='<p><strong style="color: red;">УВАГА! Це співробітник СБС.</strong><br>\n                          Він має право відігравати роль СБС, навіть будучи копом лише за Police Undercover або SSC.</p>';else if(o.includes("dbr"))e+='<p><strong style="color: red;">УВАГА! Це співробітник ДБР.</strong><br>\n                          Він має право відігравати роль ДБР, навіть будучи копом лише за Police Undercover або SSC.</p>';else if(o.includes("court"))e+='<p><strong style="color: red;">УВАГА! Це Суддя.</strong><br>\n                          Він має право виконувати функції судді або брати участь у судових процесах, навіть будучи копом лише за Police Undercover.</p>';else if(o.includes("admin"))e+='<p><strong style="color: red;">УВАГА! Це представник адміністрації сервера.</strong><br>\n                          Він має повноваження адміністратора, навіть будучи копом лише за Police Undercover.</p>';else if(o.includes("secr"))e+='<p><strong style="color: red;">УВАГА! Це співробітник охорони.</strong><br>\n                          Він може виконувати обов’язки охоронця, будучи копом.</p>';else{const t=parseInt(r.role.replace(/\s/g,""),10);let n="";n=isNaN(t)?r.role:t<=2999?"Кадет":t<=5999?"Молодший патрульний":t<=9999?"Патрульний":t<=12999?"Старший патрульний":t<=15499?"Молодший сержант":t<=18499?"Сержант":t<=21999?"Старший сержант":t<=25999?"Лейтенант":t<=29999?"Капітан":"Ветеран",e+=`<p><strong>Звання: ${n}</strong><br>\n                          ID: <strong>${r.status||"відсутній"}</strong><br>\n                          Підрозділ: <strong>${r.expiry||"відсутній"}</strong><br>\n                          Telegram: <strong>${r.telegram||"відсутній"}</strong></p>`}n.innerHTML=e}else n.innerHTML=`<p class="error">У ${t} немає затвердженого звання.</p>`;else if("sbs"===e)n.innerHTML=r?`\n            <h2>Інформація про Співробітника СБС ${t}</h2>\n            <p>\n                <strong>Звання: ${r.role}</strong><br>\n                ID: <strong>${r.status}</strong><br>\n                Telegram: <strong>${r.telegram}</strong>\n            </p>\n        `:`<p class="error">${t} не є співробітником СБС.</p>`;else if("dbr"===e)n.innerHTML=r?`\n            <h2>Інформація про Співробітника ДБР ${t}</h2>\n            <p>\n                <strong>Звання: ${r.role}</strong><br>\n                ID: <strong>${r.status}</strong><br>\n                Telegram: <strong>${r.telegram}</strong>\n            </p>\n        `:`<p class="error">${t} не є співробітником ДБР.</p>`;else if("nabs"===e)n.innerHTML=r?`\n            <h2>Інформація про Співробітника НАБС ${t}</h2>\n            <p>\n                <strong>Звання: ${r.role}</strong><br>\n                ID: <strong>${r.status}</strong><br>\n                Telegram: <strong>${r.telegram}</strong>\n            </p>\n        `:`<p class="error">${t} не є співробітником НАБС.</p>`;else if("presslicense"===e)if(r)if(r.cans&&r.cans.startsWith("CANS")){const e=r.cans.slice(4).trim();n.innerHTML=`\n                <h2>Журналістську Ліцензію Скасовано</h2>\n                <p>Прес-карту <i>№${r.status} (редакція «${r.role}»)</i> скасовано <strong>${e}</strong></p>\n                <p>Username: <strong>${t}</strong><br>\n                Telegram: <strong>${r.telegram}</strong></p>\n            `}else n.innerHTML=`\n                  <h2>Інформація про журналістську ліцензію</h2>\n                      <p>Номер: <strong>№${r.status}</strong>\n                      <br>Username: <strong>${t}</strong>\n                      <br>Редакція: <strong>${r.role}</strong>\n                      <br>Telegram: <strong>${r.telegram}</strong>\n            `;else n.innerHTML=`<p class="error">Журналістська ліцензія у ${t} відсутня.</p>`;else if("press"===e)if(r)if(r.cans&&r.cans.startsWith("CANS")){const e=r.cans.slice(4).trim();n.innerHTML=`\n                <h2>Реєстрацію ЗМІ Скасовано</h2>\n                <p>Реєстрацію ЗМІ „<i>${r.status}</i>” скасовано <strong>${e}</strong></p>\n                <p>Username власника: <strong>${t}</strong><br>\n                Telegram власника: <strong>${r.telegram}</strong></p>\n            `}else n.innerHTML=`\n                <h2>Інформація про ЗМІ</h2>\n                Назва: <strong>${r.status}</strong>\n                <br>Username власника: <strong>${t}</strong>\n                <br>Telegram власника: <strong>${r.telegram}</strong>\n            `;else n.innerHTML=`<p class="error">${t} не є власником жодного зареєстрованого ЗМІ.</p>`;else if("mafia"===e)if(r)if(r.cans&&r.cans.startsWith("CANS")){const e=r.cans.slice(4).trim();n.innerHTML=`\n                <h2>Легалізацію ОЗУ Скасовано</h2>\n                <p>Легалізацію ОЗУ (тип: ${r.role}) „<i>${r.status}</i>” скасовано <strong>${e}</strong></p>\n                <p>Username власника: <strong>${t}</strong><br>\n                Telegram власника: <strong>${r.telegram}</strong></p>\n            `}else n.innerHTML=`\n                <h2>Інформація про легалізоване ОЗУ</h2>\n                Назва: <strong>${r.status}</strong>\n                <br>Тип: <strong>${r.role}</strong>\n                <br>Username власника: <strong>${t}</strong>\n                <br>Telegram власника: <strong>${r.telegram}</strong>\n            `;else n.innerHTML=`<p class="error">${t} не є власником легалізованого ОЗУ.</p>`;else if("taxi"===e)if(r)if(r.cans&&r.cans.startsWith("CANS")){const e=r.cans.slice(4).trim();n.innerHTML=`\n                <h2>Таксистську Ліцензію Скасовано</h2>\n                Ліцензію <i>${r.status}</i> скасовано <strong>${e}</strong>\n                <br><br>Username: <strong>${t}</strong>\n                <br>Telegram: <strong>${r.telegram}</strong>\n            `}else n.innerHTML=`\n                <h2>Інформація про таксистську ліцензію ${t}</h2>\n                Номер: <strong>${r.status}</strong>\n                <br>Telegram: <strong>${r.telegram}</strong>\n            `;else n.innerHTML=`<p class="error">Таксистська ліцензія у ${t} відсутня.</p>`;else if("advocat"===e)if(r)if(r.cans&&r.cans.startsWith("CANS")){const e=r.cans.slice(4).trim();n.innerHTML=`\n                <h2>Адвокатську Ліцензію Скасовано</h2>\n                Адвокатську ліцензію <i>${r.status}</i> скасовано <strong>${e}</strong>\n                <br>Username: <strong>${t}</strong>\n                <br>Telegram: <strong>${r.telegram}</strong>\n            `}else n.innerHTML=`\n                <h2>Інформація про адвокатську ліцензію</h2>\n                <p>Номер: <strong>${r.status}</strong></p>\n                <p>Username: <strong>${t}</strong><br>\n                Telegram: <strong>${r.telegram}</strong></p>\n            `;else n.innerHTML=`<p class="error">Адвокатська ліцензія у ${t} відсутня.</p>`;else if("weapon"===e)if(r)if("00.00.0000"===r.expiry)n.innerHTML=`<h3>Інформація про ліцензію на зброю для ${t}</h3>\n                <p>\n                    Статус: <strong>скасовано через ${r.status}</strong><br>\n                    <small>Ліцензія не підлягає відновленню. Якщо ви вважаєте інакше, будь ласка, подайте апеляцію до суду.</small><br><br>\n                    Telegram: <strong>${r.telegram}</strong>\n                </p>`;else{const e=new Date;let o,s,l=r.expiry.includes("to"),a="",c="";if(l){const[t,n]=r.expiry.split("to").map((e=>e.trim())),[l,i,d]=t.split("."),[m,u,g]=n.split(".");o=new Date(`${d}-${i}-${l}T00:00:00`),s=new Date(`${g}-${u}-${m}T23:59:59`),e<o?a=`Неактивна. <br>Буде активна з ${t} до ${n}</strong>`:e>s?a="Не дійсна. <br>Для поновлення зв'яжіться з адміністратором.":(a="Дійсна",c=` з ${t} до ${n}`)}else{const[t,n,l]=r.expiry.split(".");o=new Date("2000-01-01T00:00:00"),s=new Date(`${l}-${n}-${t}T23:59:59`),e>s?a="Не дійсна. <br>Для поновлення зв'яжіться з адміністратором.":(a="Дійсна",c=`<br>Дійсна до: <strong>${r.expiry}</strong>`)}n.innerHTML=`<h2>Інформація про ліцензію на зброю</h2>\n                <p>\n                    Username: <strong>${t}</strong><br>\n                    Статус: <strong>${a}</strong>${l?c:""}${l?"":c}<br>\n                    Telegram: <strong>${r.telegram}</strong>\n                </p>`}else n.innerHTML=`<p class="error">Ліцензія для ${t} не знайдена.</p>`;showModal()}else{if(r&&r.length>0)if(1===r.length){const e=r[0],t=e.cans&&e.cans.startsWith("CANS"),o=t?e.cans.slice(4).trim():null;n.innerHTML=t?`\n                    <h2>Реєстрацію Бізнесу Скасовано</h2>\n                    <p>Реєстрацію вашого бізнесу <i>${e.status}</i> скасовано <strong>${o}</strong></p>\n                    <p>Username власника: <strong>${e.username}</strong><br>\n                    Telegram власника: <strong>${e.telegram}</strong></p>\n                `:`\n                    <h2>Інформація про Бізнес ${e.username}</h2>\n                    <p>Назва: <strong>${e.role}</strong><br>\n                    Ідентифікаційний код: <strong>${e.status}</strong><br>\n                    Telegram власника: <strong>${e.telegram}</strong></p>\n                `}else{const e=r.map(((e,t)=>{const n=e.cans&&e.cans.startsWith("CANS"),o=n?e.cans.slice(4).trim():null;return`\n                    <p>\n                        <strong>${t+1}. ${e.role}</strong><br>\n                        Ідентифікаційний код: <strong>${e.status}</strong><br>\n                        ${n?`<span style="color:red;">Реєстрацію цього бізнесу скасовано <strong>${o}</strong></span>`:""}\n                    </p>\n                    <hr>\n                `})).join("");n.innerHTML=`\n                <h2>Наявні Бізнеси у ${t}</h2>\n                ${e}\n                <p>Telegram власника: <strong>${r[0].telegram}</strong></p>\n            `}else n.innerHTML=`<p class="error">У ${t} немає зареєстрованих бізнесів.</p>`;showModal()}},document.getElementById("username").addEventListener("input",(function(){""===this.value.trim()&&pvCloseModal()}));let selectedCategory="";document.querySelectorAll(".servergallery-tab").forEach((e=>{e.addEventListener("click",(()=>{document.querySelectorAll(".servergallery-tab").forEach((e=>e.classList.remove("active"))),e.classList.add("active"),document.querySelectorAll(".servergallery-panel").forEach((e=>e.classList.remove("active"))),document.getElementById(e.dataset.target).classList.add("active")}))}));var servergallerymodal=document.getElementById("servergallerymodal"),servergallerymodalImg=document.getElementById("servergallerymodalimg"),servergallerymodalClose=document.querySelector(".servergallery-close");document.querySelectorAll(".servergallery-photo").forEach((e=>{e.addEventListener("click",(()=>{servergallerymodal.style.display="block",servergallerymodalImg.src=e.src}))})),servergallerymodalClose.onclick=()=>{servergallerymodal.style.display="none"},document.querySelectorAll(".servergallery-thumbnails img").forEach((e=>{e.addEventListener("click",(()=>{e.closest(".servergallery-event").querySelector(".servergallery-photo").src=e.src}))}));const eventSelector=document.getElementById("eventSelector"),eventDateSelector=document.getElementById("eventDateSelector"),photoOfWeekSelector=document.getElementById("photoOfWeekSelector"),events=document.querySelectorAll("#events .servergallery-event"),eventMap={};function scrollToElement(e){if(!e)return;const t=e.getBoundingClientRect().top+window.scrollY-150;window.scrollTo({top:t,behavior:"smooth"})}function createSnowflakes(){const e=document.createElement("div");e.className="snow-container",document.body.appendChild(e);for(let t=0;t<150;t++)createSnowflake(e)}function createSnowflake(e){const t=document.createElement("div");t.className="snowflake";const n=4*Math.random()+2;t.style.width=`${n}px`,t.style.height=`${n}px`,t.style.left=100*Math.random()+"vw";const o=5*Math.random()+5;t.style.animationDuration=`${o}s`,t.style.animationDelay=5*Math.random()+"s",e.appendChild(t),setTimeout((()=>{t.remove(),createSnowflake(e)}),1e3*o+5e3)}events.forEach(((e,t)=>{const n=e.querySelector(".servergallery-event-title")?.innerText.trim(),o=e.querySelector(".servergallery-event-date")?.innerText.trim();n&&o&&(eventMap[n]||(eventMap[n]=[]),eventMap[n].push({date:o,index:t}))})),Object.keys(eventMap).forEach((e=>{const t=document.createElement("option");t.value=e,t.textContent=e,eventSelector.appendChild(t)})),eventSelector.addEventListener("change",(()=>{eventDateSelector.innerHTML='<option value="">Обери дату</option>',eventDateSelector.style.display="none";const e=eventSelector.value;e&&eventMap[e]&&(eventMap[e].forEach((e=>{const t=document.createElement("option");t.value=e.index,t.textContent=e.date,eventDateSelector.appendChild(t)})),eventDateSelector.style.display="inline-block")})),document.querySelectorAll("#photooftheweek .servergallery-event").forEach(((e,t)=>{const n=e.querySelector(".servergallery-event-date-ph")?.innerText.trim();if(n){const e=document.createElement("option");e.value=t,e.textContent=n,photoOfWeekSelector.appendChild(e)}})),document.querySelectorAll(".servergallery-tab").forEach((e=>{e.addEventListener("click",(()=>{"events"===e.dataset.target?(eventSelector.style.display="inline-block",eventDateSelector.style.display="none",photoOfWeekSelector.style.display="none"):(eventSelector.style.display="none",eventDateSelector.style.display="none",photoOfWeekSelector.style.display="inline-block")}))})),"events"===document.querySelector(".servergallery-tab.active")?.dataset.target?eventSelector.style.display="inline-block":photoOfWeekSelector.style.display="inline-block",eventDateSelector.addEventListener("change",(()=>{if(""!==eventDateSelector.value){const e=events[eventDateSelector.value];scrollToElement(e)}})),photoOfWeekSelector.addEventListener("change",(()=>{if(""!==photoOfWeekSelector.value){const e=document.querySelectorAll("#photooftheweek .servergallery-event")[photoOfWeekSelector.value];scrollToElement(e)}})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("loading-screen");if(!e)return;const t=Date.now(),n=()=>{const n=Date.now()-t,o=Math.max(0,1e3-n);setTimeout((()=>{e.style.opacity="0",setTimeout((()=>{e.style.display="none"}),500)}),o)};"complete"===document.readyState?n():window.addEventListener("load",n),setTimeout(n,5e3)})),document.addEventListener("DOMContentLoaded",createSnowflakes);
